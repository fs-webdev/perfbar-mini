"use strict";function mergeRecursive(e,t){for(var i in t)try{t[i].constructor==Object?e[i]=mergeRecursive(e[i],t[i]):e[i]=t[i]}catch(n){e[i]=t[i]}return e}function injectStyles(e){var t=document.createElement("div");t.innerHTML="&shy;<style>"+e+"</style>",document.body.appendChild(t.childNodes[1])}!function(){var e=".justice{position:fixed;bottom:0;left:0;right:0;background:black;padding:0 10px 10px 10px;box-sizing:border-box;font-size:12px;font-family:monospace;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;z-index:2147483647;-webkit-transition:400ms ease-in-out;transition:400ms ease-in-out;direction:ltr}@media (min-width: 1235px){.justice{padding-bottom:10px;}}.justice.closed{-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%)}.justice .justice-metric-wrap{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.justice .justice-metric{height:40px;display:inline-block;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:10px 10px 0 0}.justice .justice-metric.chart{width:300px}.justice .justice-title{text-transform:uppercase;padding:3px 0.5em 3px 3px;color:#dfdfdf}.justice .justice-text{color:#dfdfdf;font-weight:600}.justice .justice-text.pass{color:#419ba3}.justice .justice-text.warn{color:#d4ca3d}.justice .justice-text.fail{color:#ce452d}.justice .justice-toggle{width:20px;height:20px;cursor:pointer;background-color:black;position:absolute;right:0;top:-20px;opacity:0.5;border-top-left-radius:50%;-webkit-transition:400ms ease-in-out;transition:400ms ease-in-out}@media only screen and (min-device-pixel-ratio: 1.1){.justice .justice-toggle{width:40px;height:40px;top:-40px;}}.justice .justice-toggle:after{content:'';position:absolute;width:50%;height:50%;border-radius:100%;margin:5px;background-color:#dfdfdf;-webkit-transition:400ms ease-in-out;transition:400ms ease-in-out}@media only screen and (min-device-pixel-ratio: 1.1){.justice .justice-toggle:after{margin:10px;}}.justice.closed .justice-toggle{opacity:1}.justice.closed .justice-toggle:after{background-color:#419ba3}",t=document.createElement("style");if(document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch(i){t.innerText=e}}();var Justice=function(){function e(e){var t={},e=e||{};for(var i in K)t[i]=K[i];for(var i in e)t[i]=e[i];return t}function t(e,t,i){for(var n in e.metrics)t[n]=i[n]}function i(){return H.loadEventStart-H.navigationStart}function n(){return H.domComplete-H.domLoading}function a(){return H.domInteractive-H.domLoading}function o(){var e=0;return window.chrome&&window.chrome.loadTimes?(e=1e3*window.chrome.loadTimes().firstPaintTime,e-=1e3*window.chrome.loadTimes().startLoadTime,e.toFixed(0)):"number"==typeof window.performance.timing.msFirstPaint?(e=window.performance.timing.msFirstPaint,e-=window.performance.timing.navigationStart,e.toFixed(0)):"¯\\_(ツ)_/¯"}function s(){return performance.getEntries?performance.getEntries().length:"¯\\_(ツ)_/¯"}function c(){return H.responseStart-H.connectEnd}function r(e){if(D){var t=(e-D)/1e3,i=1/t,n=i>60?60:Math.floor(i);Y=n,_.push([n,n]),_.length>A&&_.shift(),D=e}else D=e}function l(e,t){var i="";return i=e>t?"fail":e>t*Q.warnThreshold?"warn":"pass"}function d(e,t,i){var n=t.collector(),a=l(n,i);return['<div class="'+E+'-metric" id="'+t.id+'">','<span class="'+E+'-title">'+t.label+": </span>",'<span class="'+E+"-text "+a+'">'+n+t.unitLabel+"</span>","</div>"].join("")}function u(e){var t=[];for(var i in X){var n=d(i,X[i],Q.metrics[i].budget);t.push(n)}return'<div id="'+E+'-text-metrics" class="'+E+'-metric-wrap">'+t.join("")+"</div>"}function p(){var e=Q.showFPS?['<div class="'+E+'-metric chart">','<span class="'+E+'-title">FPS: </span>','<canvas id="'+E+'-fps" class="'+E+'-canvas" height="'+G+'" width="'+z+'"></canvas>',"</div>"].join(""):"";return e}function g(e,t){e.clearRect(0,0,t.width,t.height),b(e),f(e),m(e)}function f(e){var t=10;e.font="600 "+t+"px sans-serif",e.fillStyle=P,e.fillText(0,0,G),e.fillStyle=I,e.fillText(30,0,G/2+t/2),e.fillStyle=F,e.fillText(60,0,0+t)}function m(e){var t=e.createLinearGradient(0,G,0,0);t.addColorStop(0,P),t.addColorStop(.25,P),t.addColorStop(.5,I),t.addColorStop(1,F),e.strokeStyle=t,e.fillStyle=t}function b(e){for(var t=0;3>t;t++){var i=G/2*t+.5-(2===t?1:0);e.beginPath(),e.moveTo(.5+q,i),e.lineTo(z+.5,i),e.lineWidth=1,e.strokeStyle=L,e.stroke()}}function h(e){var t=null;return"spline"===e?t=x:"dots"===e&&(t=w),t}function w(e,t,i){g(e,t);for(var n=0;n<i.length;n++){var a=(60-i[n][1])*N;e.fillRect(i.length-n+q,a,1.5,1.5)}}function x(e,t,i){g(e,t),e.beginPath();var n=i.length>0?i[i.length]:0;e.moveTo(0,n);for(var a=0;a<i.length;a++){var o=0===a?0:a,s=(60-i[a][1])*N;e.lineTo(i.length-o+q,s)}e.lineWidth=1,e.stroke()}function j(){V=document.getElementById(E+"-fps"),W=V.getContext("2d")}function y(){var e=S();M=document.createElement("div"),M.id=E,M.classList.add(E),M.classList.add(e),document.body.appendChild(M),M=document.getElementById(E),M.innerHTML=['<div id="'+E+'-toggle" class="'+E+'-toggle"></div>',u(),p()].join(""),Q.showFPS&&j(),k()}function v(){var e=u(X),t=document.getElementById(E+"-text-metrics");t.innerHTML=e}function k(){document.getElementById(E+"-toggle").onclick=function(){var e=document.getElementById(E);e.className.match(" closed")?(e.className=e.className.replace(" closed",""),T("open")):(e.className+=" closed",T("closed"))}}function T(e){window.localStorage&&window.localStorage.setItem(E+"-state",e)}function S(){return window.localStorage?window.localStorage.getItem(E+"-state")||"open":void 0}function C(e){J++,Q.showFPS&&(r(e),O(W,V,_)),null===R?R=e:e-R>3e3&&(R=e,v()),window.requestAnimationFrame(C)}function B(i){H=window.performance.timing,Q=e(i),t(Q,X,U),y(),O=h(Q.chartType),window.requestAnimationFrame(C)}var L="rgb(48, 48, 48)",P="rgb(206, 69, 45)",I="rgb(212, 202, 61)",F="rgb(65, 155, 163)",E="justice",z=300,G=40,N=G/60,q=20,A=z-q,R=0,J=0,H=null,M=null,O=null,Y=0,_=[],D=null,V=null,W=null,K={metrics:{TTFB:{budget:200},domInteractive:{budget:250},domComplete:{budget:800},firstPaint:{budget:1e3},pageLoad:{budget:2e3},requests:{budget:6}},"interface":{position:"fixed",placement:"bottom"},warnThreshold:.8,chartType:"spline",showFPS:!0},Q={},U={pageLoad:{id:E+"-load",label:"Load",unitLabel:"ms",collector:i},firstPaint:{id:E+"-paint",label:"Paint",unitLabel:"ms",collector:o},TTFB:{id:E+"-ttfb",label:"TTFB",unitLabel:"ms",collector:c},domComplete:{id:E+"-complete",label:"Complete",unitLabel:"ms",collector:n},domInteractive:{id:E+"-interactive",label:"Interactive",unitLabel:"ms",collector:a},requests:{id:E+"-requests",label:"Requests",unitLabel:"",collector:s}},X={};return{init:function(e){"performance"in window&&"timing"in window.performance?"complete"===document.readyState?B(e,"already loaded"):window.onload=function(){B(e)}:console.log("Justice: performance api not supported in this browser, initialization stopped.")}}}();window.fsJustice=function(){var e=!1;arguments.length>0&&(e=arguments[0]),e.gradeGoal=e.gradeGoal||"D",function(t,i){function n(e){var t=p?"https://edge.fscdn.org/assets/budgets/performance-budget-jsonp.min.json":"//edge.fscdn.org/assets/budgets/performance-budget-jsonp.min.json",i=document.createElement("script");i.src=t,document.body.appendChild(i),window.getData=function(t){a(t,function(t){e(t)})}}function a(e,i){g.budget=e,t.sessionStorage.setItem(f,JSON.stringify(e)),i&&i(e)}function o(e,t,i){e&&(g.scenario.pageType=e),t&&(g.scenario.connection=t),s({pageType:g.scenario.pageType,connection:g.scenario.connection},function(){i&&i()})}function s(e,i){e.pageType&&e.connection?(t.sessionStorage.setItem(m,JSON.stringify(e)),i&&i(e)):i&&i()}function c(){var e=w;arguments.length>0&&(e=mergeRecursive(w,arguments[0])),t.console.log("Perfbar config:",e),Justice.init(e),d()}function r(t){e.budgets&&(t=e.budgets);var i=e.budgets?g.currentBudget=e.budgets[g.scenario.connection]:g.currentBudget=t[g.scenario.pageType][g.scenario.connection],n={loadTime:{max:i.LoadTime[e.gradeGoal]},latency:{max:i.Latency[e.gradeGoal]},FirstPaint:{max:i.FirstPaint[e.gradeGoal]}};i.domInteractive&&(n.domInteractive=i.FirstPaint[e.gradeGoal]),w={metrics:{TTFB:{budget:n.latency.max},domInteractive:{budget:n.domInteractive?n.domInteractive.max:250},domComplete:{budget:n.domComplete?n.domComplete.max:100},firstPaint:{budget:n.FirstPaint.max||1e3},pageLoad:{budget:n.loadTime.max||2e3},requests:{budget:n.requests?n.requests.max:6}},warnThreshold:.8,showFPS:!1,chartType:"spline"},e.justice?c(e.justice):c()}function l(){t.location.reload()}function d(){t.requestAnimationFrame(function(){var e=document.getElementById("justice");return e?void u():d()})}function u(){function e(e,t){var i="";return"pageType"==e&&(i=g.scenario.pageType==t?"checked":""),"connection"==e&&(i=g.scenario.connection==t?"checked":""),i}var t=i.createElement("div");t.innerHTML='<div class="justice-switch"><abbr title="Compare page against different budgets per pagetype"><h5 class="perfBar-label">Pagetype:</h3><div class="switch"><input type="radio" class="switch-input" name="pagetype" value="landing" id="landing" onclick="perfBarAddons.handleSwitchClick(this)" '+e("pageType","landing")+'><label for="landing" class="switch-label switch-label-off">Landing</label><input type="radio" class="switch-input" name="pagetype" value="general" id="general" onclick="perfBarAddons.handleSwitchClick(this)" '+e("pageType","general")+'><label for="general" class="switch-label switch-label-on">General</label><span class="switch-selection"></span></div></abbr></div><div class="justice-switch"><abbr title="Compare page against different budgets per connection type"><h5 class="perfBar-label">Connection:</h3><div class="switch"><input type="radio" class="switch-input" name="connection" value="cable-desktop" id="cable-desktop" onclick="perfBarAddons.handleSwitchClick(this)" '+e("connection","cable-desktop")+'><label for="cable-desktop" class="switch-label switch-label-off">Cable</label><input type="radio" class="switch-input" name="connection" value="3G-mobile" id="3G-mobile" onclick="perfBarAddons.handleSwitchClick(this)" '+e("connection","3G-mobile")+'><label for="3G-mobile" class="switch-label switch-label-on">3G</label><span class="switch-selection"></span></div></abbr></div>',t.className="justice-scenarios closed",t.id="justice-scenarios";var n=i.createElement("div");n.className="justice-switch-toggle",n.innerHTML='<a href="#" id="justice-switch-toggle-button" onclick="perfBarAddons.handleSwitchToggleClick(); return false;" title="Set Default Scenario">+</a>';var a=i.getElementById("justice");i.querySelector(".justice-scenarios");a.appendChild(n,a.firstChild),a.appendChild(t,a.firstChild),g.handleSwitchToggleClick=function(){var e=i.getElementById("justice-scenarios");e.classList.toggle("closed")},g.handleSwitchClick=function(e){"pagetype"===e.name?o(e.value,null,function(){console.log("pagetype switch changed!"),l()}):"connection"===e.name?o(null,e.value,function(){console.log("connection switch changed!"),l()}):console.error("ERROR: Perfbar >> perfbarHandleClick : not a valid switch"),console.log("PerfBar: New performance budget scenario. Pagetype:",g.scenario.pageType,"Connection:",g.scenario.connection)}}var p=!0,g=window.perfBarAddons={scenario:{},budget:{},currentBudget:{}},f="fs-performance-budget",m=f+"-scenario",b=JSON.parse(t.sessionStorage.getItem(f)),h=JSON.parse(t.sessionStorage.getItem(m));console.time("getBudget"),h?o(h.pageType,h.connection):(e.pageType?g.scenario.pageType=e.pageType:g.scenario.pageType="landing",e.defaultConnection?g.scenario.connection=e.defaultConnection:g.scenario.connection="cable-desktop",o(g.scenario.pageType,g.scenario.connection)),b?(g.budget=b,r(g.budget)):n(function(e){g.budget=e,r(e)});var w}(window,document)},injectStyles('#justice{font-size:13px;font-family:"Verdana",sans-serif}#justice .justice-metric-wrap{justify-content:center}#justice .justice-metric{margin:5px 5px 0 0;height:inherit}#justice .justice-switch-toggle{color:#fff;height:10px;display:flex;width:100%;flex-direction:row-reverse;align-items:flex-end}#justice .justice-switch-toggle>a{color:#fff;padding:.5em;font-size:20px;font-weight:700;z-index:2;text-decoration:none}#justice .justice-scenarios{width:100%;margin:1em auto;height:inherit;display:flex;flex-flow:wrap;justify-content:center;transition:400ms ease-in-out;bottom:0%;left:0%;right:0%;position:absolute;background:rgba(0,0,0,.8)}#justice .justice-scenarios.closed{transform:translateY(110%)}#justice .justice-scenarios h5{color:#fff;display:flex;align-items:center;justify-content:center;font-family:"Verdana",sans-serif;margin:.5em 0}#justice .justice-scenarios .perfBar-switches{padding:0;margin:0 auto 10px;color:#404040;display:flex;align-items:center;justify-content:center;flex-wrap:wrap}#justice .justice-scenarios .perfBar-switches>div{padding:5px 10px}#justice .justice-scenarios .switch{position:relative;height:26px;width:120px;background:rgba(0,0,0,.25);-webkit-box-shadow:inset 0 1px 3px rgba(0,0,0,.3),0 1px rgba(255,255,255,.1);box-shadow:inset 0 1px 3px rgba(0,0,0,.3),0 1px rgba(255,255,255,.1);background-color:#333;border-radius:4px;margin:0 .5em}#justice .justice-scenarios .switch-label{position:relative;z-index:2;float:left;width:58px;line-height:26px;font-size:11px;color:#fff;text-align:center;text-shadow:0 1px 1px rgba(0,0,0,.45);cursor:pointer}#justice .justice-scenarios .switch-label:active{font-weight:700}#justice .justice-scenarios .switch-label-off{padding-left:2px}#justice .justice-scenarios .switch-label-on{padding-right:2px}#justice .justice-scenarios .switch-input{display:none}#justice .justice-scenarios .switch-input:checked+.switch-label{font-weight:700;color:#333;text-shadow:0 1px rgba(255,255,255,.25);-webkit-transition:.15s ease-out;-moz-transition:.15s ease-out;-o-transition:.15s ease-out;transition:.15s ease-out}#justice .justice-scenarios .switch-input:checked+.switch-label-on~.switch-selection{left:60px}#justice .justice-scenarios .switch-selection{display:block;position:absolute;z-index:1;top:2px;left:2px;width:58px;height:22px;background:#65bd63;border-radius:3px;background-image:-webkit-linear-gradient(top,#9dd993,#65bd63);background-image:-moz-linear-gradient(top,#9dd993,#65bd63);background-image:-o-linear-gradient(top,#9dd993,#65bd63);background-image:linear-gradient(to bottom,#9dd993,#65bd63);-webkit-box-shadow:inset 0 1px rgba(255,255,255,.5),0 0 2px rgba(0,0,0,.2);box-shadow:inset 0 1px rgba(255,255,255,.5),0 0 2px rgba(0,0,0,.2);-webkit-transition:left .15s ease-out;-moz-transition:left .15s ease-out;-o-transition:left .15s ease-out;transition:left .15s ease-out}#justice .justice-scenarios .switch-blue .switch-selection{background:#3aa2d0;background-image:-webkit-linear-gradient(top,#4fc9ee,#3aa2d0);background-image:-moz-linear-gradient(top,#4fc9ee,#3aa2d0);background-image:-o-linear-gradient(top,#4fc9ee,#3aa2d0);background-image:linear-gradient(to bottom,#4fc9ee,#3aa2d0)}#justice .justice-scenarios .switch-yellow .switch-selection{background:#c4bb61;background-image:-webkit-linear-gradient(top,#e0dd94,#c4bb61);background-image:-moz-linear-gradient(top,#e0dd94,#c4bb61);background-image:-o-linear-gradient(top,#e0dd94,#c4bb61);background-image:linear-gradient(to bottom,#e0dd94,#c4bb61)}');